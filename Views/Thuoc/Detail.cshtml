@model QuanLyThuoc.ViewModel.ChiTietThuocVM


@{
    ViewData["Title"] = "Detail";
}

<style>
    .product-image-hover img {
        transition: transform 0.3s ease;
    }

    .product-image-hover:hover img {
        transform: scale(1.05);
    }

    .hover-shadow:hover {
        box-shadow: 0 0 15px rgba(0, 123, 255, 0.4);
        transform: translateY(-2px);
        transition: all 0.3s ease;
    }


</style>


<!-- Single Page Header start -->
<div class="container-fluid page-header py-5">
    <h1 class="text-center text-white display-6">Shop Detail</h1>
    <ol class="breadcrumb justify-content-center mb-0">
        <li class="breadcrumb-item"><a href="/">Home</a></li>
        <li class="breadcrumb-item"><a href="#">Thuốc</a></li>
        <li class="breadcrumb-item active text-white">@Model.TenThuoc</li>
    </ol>
</div>
<!-- Single Page Header End -->
<!-- Single Product Start -->
<div class="container-fluid py-5 mt-5">
    <div class="container py-5">
        <div class="row g-4 mb-5">
            <div class="col-lg-8 col-xl-9">
                <div class="row g-4">
                    <div class="col-lg-6">
                        <div class="border rounded product-image-hover">
                            <a asp-action="Detail" asp-route-id="@Model.MaThuoc">
                                <img src="~/Hinh/Thuoc/@Model.HinhAnh" class="img-fluid rounded" alt="@Model.TenThuoc">
                            </a>
                        </div>
                    </div>
                    <div class="col-lg-6">
                        <h4 class="fw-bold mb-3">@Model.TenThuoc</h4>
                        <p class="mb-3">Category: @Model.TenLoai</p>
                        <h5 class="fw-bold mb-3 text-danger fs-4">@Model.GiaBan VND</h5>
                        <div class="d-flex mb-4">
                            <i class="fa fa-star text-secondary"></i>
                            <i class="fa fa-star text-secondary"></i>
                            <i class="fa fa-star text-secondary"></i>
                            <i class="fa fa-star text-secondary"></i>
                            <i class="fa fa-star"></i>
                        </div>
                        <p class="mb-4">@Model.MoTaNgan</p>
                        <form asp-action="AddToCart" asp-controller="Cart" asp-route-id="@Model.MaThuoc">
                            <div class="input-group quantity mb-5" style="width: 130px;">
                                <div class="input-group-btn">
                                    <button class="btn btn-sm btn-minus rounded-circle bg-light border" type="button">
                                        <i class="fa fa-minus"></i>
                                    </button>
                                </div>
                                <input type="text" class="form-control form-control-sm text-center border-0" value="1" name="quanlity">
                                <div class="input-group-btn">
                                    <button class="btn btn-sm btn-plus rounded-circle bg-light border" type="button">
                                        <i class="fa fa-plus"></i>
                                    </button>
                                </div>
                            </div>
                            <button type="submit" class="btn border border-secondary rounded-pill px-4 py-2 mb-4 text-primary fw-bold hover-shadow"><i class="fa fa-shopping-bag me-2 text-primary"></i> Mua Hàng</button>
                        </form>
                    </div>
                    <div class="col-lg-12">
                        <nav>
                            <div class="nav nav-tabs mb-3">
                                <button class="nav-link active border-white border-bottom-0" type="button" role="tab"
                                        id="nav-about-tab" data-bs-toggle="tab" data-bs-target="#nav-about"
                                        aria-controls="nav-about" aria-selected="true">
                                    Thông tin hàng hóa
                                </button>
                                <button class="nav-link border-white border-bottom-0" type="button" role="tab"
                                        id="nav-mission-tab" data-bs-toggle="tab" data-bs-target="#nav-mission"
                                        aria-controls="nav-mission" aria-selected="false">
                                    Đánh giá
                                </button>
                            </div>
                        </nav>
                        <div class="tab-content mb-5">
                            <div class="tab-pane active" id="nav-about" role="tabpanel" aria-labelledby="nav-about-tab">
                                <p>@Model.ChiTietThuoc</p>
                                <div class="px-2">
                                    <div class="row g-4">
                                        <div class="col-6">
                                            <div class="row bg-light align-items-center text-center justify-content-center py-2">
                                                <div class="col-6">
                                                    <p class="mb-0">Tên Thuốc</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="mb-0">@Model.TenThuoc</p>
                                                </div>
                                            </div>
                                            <div class="row text-center align-items-center justify-content-center py-2">
                                                <div class="col-6">
                                                    <p class="mb-0">Số Lượng</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="mb-0">@Model.SoLuongTon</p>
                                                </div>
                                            </div>
                                            <div class="row bg-light text-center align-items-center justify-content-center py-2">
                                                <div class="col-6">
                                                    <p class="mb-0">Giá Bán</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="mb-0">@Model.GiaBan</p>
                                                </div>
                                            </div>
                                            <div class="row text-center align-items-center justify-content-center py-2">
                                                <div class="col-6">
                                                    <p class="mb-0">Tên Loại Thuốc</p>
                                                </div>
                                                <div class="col-6">
                                                    <p class="mb-0">@Model.TenLoai</p>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="tab-pane" id="nav-mission" role="tabpanel" aria-labelledby="nav-mission-tab">
                                <div id="commentList">
                                    <div class="d-flex">
                                        <img src="img/avatar.jpg" class="img-fluid rounded-circle p-3" style="width: 100px; height: 100px;" alt="">
                                        <div class="">
                                            <p class="mb-2" style="font-size: 14px;">April 12, 2024</p>
                                            <div class="d-flex justify-content-between">
                                                <h5>Sam Peters</h5>
                                                <div class="d-flex mb-3">
                                                    <i class="fa fa-star text-secondary"></i>
                                                    <i class="fa fa-star text-secondary"></i>
                                                    <i class="fa fa-star text-secondary"></i>
                                                    <i class="fa fa-star"></i>
                                                    <i class="fa fa-star"></i>
                                                </div>
                                            </div>
                                            <p class="text-dark">
                                                The generated Lorem Ipsum is therefore always free from repetition injected humour, or non-characteristic
                                                words etc. Susp endisse ultricies nisi vel quam suscipit
                                            </p>
                                        </div>
                                    </div>

                                </div>
                            </div>

                            <div class="tab-pane" id="nav-vision" role="tabpanel">
                                <p class="text-dark">
                                    Tempor erat elitr rebum at clita. Diam dolor diam ipsum et tempor sit. Aliqu diam
                                    amet diam et eos labore. 3
                                </p>
                                <p class="mb-0">
                                    Diam dolor diam ipsum et tempor sit. Aliqu diam amet diam et eos labore.
                                    Clita erat ipsum et lorem et sit
                                </p>
                            </div>
                        </div>
                    </div>
                    <form id="commentForm">
                        <h4 class="mb-5 fw-bold">Leave a Reply</h4>
                        <div class="row g-4">
                            <div class="col-lg-6">
                                <div class="border-bottom rounded">
                                    <input type="text" id="commentName" class="form-control border-0 me-4" placeholder="Your Name *" required>
                                </div>
                            </div>
                            <div class="col-lg-6">
                                <div class="border-bottom rounded">
                                    <input type="email" id="commentEmail" class="form-control border-0" placeholder="Your Email *" required>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="border-bottom rounded my-4">
                                    <textarea id="commentContent" class="form-control border-0" cols="30" rows="8" placeholder="Your Review *" spellcheck="false" required></textarea>
                                </div>
                            </div>
                            <div class="col-lg-12">
                                <div class="d-flex justify-content-between py-3 mb-5">
                                    <div class="d-flex align-items-center">
                                        <p class="mb-0 me-3">Please rate:</p>
                                        <div class="d-flex align-items-center" style="font-size: 12px;" id="starRating">
                                            <i class="fa fa-star text-muted" data-value="1"></i>
                                            <i class="fa fa-star text-muted" data-value="2"></i>
                                            <i class="fa fa-star text-muted" data-value="3"></i>
                                            <i class="fa fa-star text-muted" data-value="4"></i>
                                            <i class="fa fa-star text-muted" data-value="5"></i>
                                        </div>
                                    </div>
                                    <button type="submit" class="btn border border-secondary text-primary rounded-pill px-4 py-3">Post Comment</button>
                                </div>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="col-lg-4 col-xl-3">
                <div class="row g-4 fruite">
                    <div class="col-lg-12">
                        @await Html.PartialAsync("_TimKiemPanel")
                        @await Component.InvokeAsync("MenuDanhMuc")
                    </div>
                    
                 
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Single Product End -->


@section Scripts {
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            const commentForm = document.getElementById('commentForm');
            const commentList = document.getElementById('commentList');
            let currentRating = 5; // mặc định 5 sao

           

            // Bắt sự kiện chọn sao
            document.querySelectorAll('#starRating i').forEach(star => {
                star.addEventListener('click', function () {
                    currentRating = this.getAttribute('data-value');
                    document.querySelectorAll('#starRating i').forEach(s => s.classList.remove('text-secondary'));
                    for (let i = 0; i < currentRating; i++) {
                        document.querySelectorAll('#starRating i')[i].classList.add('text-secondary');
                    }
                });
            });

            // Bắt sự kiện submit form
            if (commentForm && commentList) {
                commentForm.addEventListener('submit', function (e) {
                    e.preventDefault();

                    const name = document.getElementById('commentName').value.trim();
                    const content = document.getElementById('commentContent').value.trim();

                    const now = new Date();
                    const dateStr = now.toLocaleDateString('vi-VN');

                    const commentHTML = `
                            <div class="d-flex mb-4">
                                <img src="/img/avatar.jpg" class="img-fluid rounded-circle p-3" style="width: 100px; height: 100px;" alt="">
                                <div>
                                    <p class="mb-2" style="font-size: 14px;">${dateStr}</p>
                                    <div class="d-flex justify-content-between">
                                        <h5>${name}</h5>
                                        <div class="d-flex mb-3">
                                            ${[...Array(5)].map((_, i) =>
                        `<i class="fa fa-star ${i < currentRating ? 'text-secondary' : ''}"></i>`).join('')}
                                        </div>
                                    </div>
                                    <p>${content}</p>
                                </div>
                            </div>
                        `;

                    commentList.insertAdjacentHTML('afterbegin', commentHTML);
                    commentForm.reset();
                    currentRating = 5;
                    document.querySelectorAll('#starRating i').forEach(s => s.classList.remove('text-secondary'));
                    for (let i = 0; i < currentRating; i++) {
                        document.querySelectorAll('#starRating i')[i].classList.add('text-secondary');
                    }
                });
            }
        });
    </script>
}
